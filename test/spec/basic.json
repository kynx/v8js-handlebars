[
	{
		"description": "basic context",
		"it": "most basic",
		"template": "{{foo}}",
		"data": {
			"foo": "foo"
		},
		"expected": "foo",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "escaping",
		"template": "\\{{foo}}",
		"data": {
			"foo": "food"
		},
		"expected": "{{foo}}",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "escaping",
		"template": "content \\{{foo}}",
		"data": {
			"foo": "food"
		},
		"expected": "content {{foo}}",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "escaping",
		"template": "\\\\{{foo}}",
		"data": {
			"foo": "food"
		},
		"expected": "\\food",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "escaping",
		"template": "content \\\\{{foo}}",
		"data": {
			"foo": "food"
		},
		"expected": "content \\food",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "escaping",
		"template": "\\\\ {{foo}}",
		"data": {
			"foo": "food"
		},
		"expected": "\\\\ food",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "compiling with a basic context",
		"template": "Goodbye\n{{cruel}}\n{{world}}!",
		"data": {
			"cruel": "cruel",
			"world": "world"
		},
		"expected": "Goodbye\ncruel\nworld!",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "compiling with a string context",
		"template": "{{.}}{{length}}",
		"data": "bye",
		"expected": "bye3",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "compiling with an undefined context",
		"template": "Goodbye\n{{cruel}}\n{{world.bar}}!",
		"expected": "Goodbye\n\n!",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "compiling with an undefined context",
		"template": "{{#unless foo}}Goodbye{{../test}}{{test2}}{{/unless}}",
		"expected": "Goodbye",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "comments",
		"template": "{{! Goodbye}}Goodbye\n{{cruel}}\n{{world}}!",
		"data": {
			"cruel": "cruel",
			"world": "world"
		},
		"expected": "Goodbye\ncruel\nworld!",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "comments",
		"template": "    {{~! comment ~}}      blah",
		"data": {},
		"expected": "blah",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "comments",
		"template": "    {{~!-- long-comment --~}}      blah",
		"data": {},
		"expected": "blah",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "comments",
		"template": "    {{! comment ~}}      blah",
		"data": {},
		"expected": "    blah",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "comments",
		"template": "    {{!-- long-comment --~}}      blah",
		"data": {},
		"expected": "    blah",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "comments",
		"template": "    {{~! comment}}      blah",
		"data": {},
		"expected": "      blah",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "comments",
		"template": "    {{~!-- long-comment --}}      blah",
		"data": {},
		"expected": "      blah",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "boolean",
		"template": "{{#goodbye}}GOODBYE {{/goodbye}}cruel {{world}}!",
		"data": {
			"goodbye": true,
			"world": "world"
		},
		"expected": "GOODBYE cruel world!",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "boolean",
		"template": "{{#goodbye}}GOODBYE {{/goodbye}}cruel {{world}}!",
		"data": {
			"goodbye": false,
			"world": "world"
		},
		"expected": "cruel world!",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "zeros",
		"template": "num1: {{num1}}, num2: {{num2}}",
		"data": {
			"num1": 42,
			"num2": 0
		},
		"expected": "num1: 42, num2: 0",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "zeros",
		"template": "num: {{.}}",
		"data": 0,
		"expected": "num: 0",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "zeros",
		"template": "num: {{num1/num2}}",
		"data": {
			"num1": {
				"num2": 0
			}
		},
		"expected": "num: 0",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "false",
		"template": "val1: {{val1}}, val2: {{val2}}",
		"data": {
			"val1": false,
			"val2": false
		},
		"expected": "val1: false, val2: false",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "false",
		"template": "val: {{.}}",
		"data": false,
		"expected": "val: false",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "false",
		"template": "val: {{val1/val2}}",
		"data": {
			"val1": {
				"val2": false
			}
		},
		"expected": "val: false",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "false",
		"template": "val1: {{{val1}}}, val2: {{{val2}}}",
		"data": {
			"val1": false,
			"val2": false
		},
		"expected": "val1: false, val2: false",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "false",
		"template": "val: {{{val1/val2}}}",
		"data": {
			"val1": {
				"val2": false
			}
		},
		"expected": "val: false",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "should handle undefined and null",
		"template": "{{awesome undefined null}}",
		"data": {
			"awesome": {
				"!code": true,
				"javascript": "function (_undefined, _null, options) {\n            return (_undefined === undefined) + ' ' + (_null === null) + ' ' + (typeof options);\n          }",
				"phpstub": "function (_undefined, _null, options) {\n            return (_undefined === undefined) + ' ' + (_null === null) + ' ' + (typeof options);\n          }"
			}
		},
		"expected": "true true object",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "should handle undefined and null",
		"template": "{{undefined}}",
		"data": {
			"undefined": {
				"!code": true,
				"javascript": "function () {\n            return 'undefined!';\n          }",
				"phpstub": "function () {\n            return 'undefined!';\n          }"
			}
		},
		"expected": "undefined!",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "should handle undefined and null",
		"template": "{{null}}",
		"data": {
			"null": {
				"!code": true,
				"javascript": "function () {\n            return 'null!';\n          }",
				"phpstub": "function () {\n            return 'null!';\n          }"
			}
		},
		"expected": "null!",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "newlines",
		"template": "Alan's\nTest",
		"data": {},
		"expected": "Alan's\nTest",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "newlines",
		"template": "Alan's\rTest",
		"data": {},
		"expected": "Alan's\rTest",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "escaping text",
		"template": "Awesome's",
		"data": {},
		"expected": "Awesome's",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "escaping text",
		"template": "Awesome\\",
		"data": {},
		"expected": "Awesome\\",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "escaping text",
		"template": "Awesome\\\\ foo",
		"data": {},
		"expected": "Awesome\\\\ foo",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "escaping text",
		"template": "Awesome {{foo}}",
		"data": {
			"foo": "\\"
		},
		"expected": "Awesome \\",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "escaping text",
		"template": " ' ' ",
		"data": {},
		"expected": " ' ' ",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "escaping expressions",
		"template": "{{{awesome}}}",
		"data": {
			"awesome": "&'\\<>"
		},
		"expected": "&'\\<>",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "escaping expressions",
		"template": "{{&awesome}}",
		"data": {
			"awesome": "&'\\<>"
		},
		"expected": "&'\\<>",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "escaping expressions",
		"template": "{{awesome}}",
		"data": {
			"awesome": "&\"'`\\<>"
		},
		"expected": "&amp;&quot;&#x27;&#x60;\\&lt;&gt;",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "escaping expressions",
		"template": "{{awesome}}",
		"data": {
			"awesome": "Escaped, <b> looks like: &lt;b&gt;"
		},
		"expected": "Escaped, &lt;b&gt; looks like: &amp;lt;b&amp;gt;",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "functions returning safestrings shouldn't be escaped",
		"template": "{{awesome}}",
		"data": {
			"awesome": {
				"!code": true,
				"javascript": "function () { return new Handlebars.SafeString('&\\'\\\\<>'); }",
				"phpstub": "function () { return new Handlebars.SafeString('&\\'\\\\<>'); }"
			}
		},
		"expected": "&'\\<>",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "functions",
		"template": "{{awesome}}",
		"data": {
			"awesome": {
				"!code": true,
				"javascript": "function () { return 'Awesome'; }",
				"phpstub": "function () { return 'Awesome'; }"
			}
		},
		"expected": "Awesome",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "functions",
		"template": "{{awesome}}",
		"data": {
			"awesome": {
				"!code": true,
				"javascript": "function () { return this.more; }",
				"phpstub": "function () { return this.more; }"
			},
			"more": "More awesome"
		},
		"expected": "More awesome",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "functions with context argument",
		"template": "{{awesome frank}}",
		"data": {
			"awesome": {
				"!code": true,
				"javascript": "function (context) { return context; }",
				"phpstub": "function (context) { return context; }"
			},
			"frank": "Frank"
		},
		"expected": "Frank",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "pathed functions with context argument",
		"template": "{{bar.awesome frank}}",
		"data": {
			"bar": {
				"awesome": {
					"!code": true,
					"javascript": "function (context) { return context; }",
					"phpstub": "function (context) { return context; }"
				}
			},
			"frank": "Frank"
		},
		"expected": "Frank",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "depthed functions with context argument",
		"template": "{{#with frank}}{{../awesome .}}{{/with}}",
		"data": {
			"awesome": {
				"!code": true,
				"javascript": "function (context) { return context; }",
				"phpstub": "function (context) { return context; }"
			},
			"frank": "Frank"
		},
		"expected": "Frank",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "block functions with context argument",
		"template": "{{#awesome 1}}inner {{.}}{{/awesome}}",
		"data": {
			"awesome": {
				"!code": true,
				"javascript": "function (context, options) { return options.fn(context); }",
				"phpstub": "function (context, options) { return options.fn(context); }"
			}
		},
		"expected": "inner 1",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "depthed block functions with context argument",
		"template": "{{#with value}}{{#../awesome 1}}inner {{.}}{{/../awesome}}{{/with}}",
		"data": {
			"value": true,
			"awesome": {
				"!code": true,
				"javascript": "function (context, options) { return options.fn(context); }",
				"phpstub": "function (context, options) { return options.fn(context); }"
			}
		},
		"expected": "inner 1",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "block functions without context argument",
		"template": "{{#awesome}}inner{{/awesome}}",
		"data": {
			"awesome": {
				"!code": true,
				"javascript": "function (options) { return options.fn(this); }",
				"phpstub": "function (options) { return options.fn(this); }"
			}
		},
		"expected": "inner",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "pathed block functions without context argument",
		"template": "{{#foo.awesome}}inner{{/foo.awesome}}",
		"data": {
			"foo": {
				"awesome": {
					"!code": true,
					"javascript": "function () { return this; }",
					"phpstub": "function () { return this; }"
				}
			}
		},
		"expected": "inner",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "depthed block functions without context argument",
		"template": "{{#with value}}{{#../awesome}}inner{{/../awesome}}{{/with}}",
		"data": {
			"value": true,
			"awesome": {
				"!code": true,
				"javascript": "function () { return this; }",
				"phpstub": "function () { return this; }"
			}
		},
		"expected": "inner",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "paths with hyphens",
		"template": "{{foo-bar}}",
		"data": {
			"foo-bar": "baz"
		},
		"expected": "baz",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "paths with hyphens",
		"template": "{{foo.foo-bar}}",
		"data": {
			"foo": {
				"foo-bar": "baz"
			}
		},
		"expected": "baz",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "paths with hyphens",
		"template": "{{foo/foo-bar}}",
		"data": {
			"foo": {
				"foo-bar": "baz"
			}
		},
		"expected": "baz",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "nested paths",
		"template": "Goodbye {{alan/expression}} world!",
		"data": {
			"alan": {
				"expression": "beautiful"
			}
		},
		"expected": "Goodbye beautiful world!",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "nested paths with empty string value",
		"template": "Goodbye {{alan/expression}} world!",
		"data": {
			"alan": {
				"expression": ""
			}
		},
		"expected": "Goodbye  world!",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "literal paths",
		"template": "Goodbye {{[@alan]/expression}} world!",
		"data": {
			"@alan": {
				"expression": "beautiful"
			}
		},
		"expected": "Goodbye beautiful world!",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "literal paths",
		"template": "Goodbye {{[foo bar]/expression}} world!",
		"data": {
			"foo bar": {
				"expression": "beautiful"
			}
		},
		"expected": "Goodbye beautiful world!",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "literal references",
		"template": "Goodbye {{[foo bar]}} world!",
		"data": {
			"foo bar": "beautiful"
		},
		"expected": "Goodbye beautiful world!",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "literal references",
		"template": "Goodbye {{\"foo bar\"}} world!",
		"data": {
			"foo bar": "beautiful"
		},
		"expected": "Goodbye beautiful world!",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "literal references",
		"template": "Goodbye {{'foo bar'}} world!",
		"data": {
			"foo bar": "beautiful"
		},
		"expected": "Goodbye beautiful world!",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "literal references",
		"template": "Goodbye {{\"foo[bar\"}} world!",
		"data": {
			"foo[bar": "beautiful"
		},
		"expected": "Goodbye beautiful world!",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "literal references",
		"template": "Goodbye {{\"foo'bar\"}} world!",
		"data": {
			"foo'bar": "beautiful"
		},
		"expected": "Goodbye beautiful world!",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "literal references",
		"template": "Goodbye {{'foo\"bar'}} world!",
		"data": {
			"foo\"bar": "beautiful"
		},
		"expected": "Goodbye beautiful world!",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "that current context path ({{.}}) doesn't hit helpers",
		"template": "test: {{.}}",
		"data": null,
		"expected": "test: ",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "complex but empty paths",
		"template": "{{person/name}}",
		"data": {
			"person": {
				"name": null
			}
		},
		"expected": "",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "complex but empty paths",
		"template": "{{person/name}}",
		"data": {
			"person": {}
		},
		"expected": "",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "this keyword in paths",
		"template": "{{#goodbyes}}{{this}}{{/goodbyes}}",
		"data": {
			"goodbyes": [
				"goodbye",
				"Goodbye",
				"GOODBYE"
			]
		},
		"expected": "goodbyeGoodbyeGOODBYE",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "this keyword in paths",
		"template": "{{#hellos}}{{this/text}}{{/hellos}}",
		"data": {
			"hellos": [
				{
					"text": "hello"
				},
				{
					"text": "Hello"
				},
				{
					"text": "HELLO"
				}
			]
		},
		"expected": "helloHelloHELLO",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "this keyword nested inside path",
		"template": "{{#hellos}}{{text/this/foo}}{{/hellos}}",
		"exception": true,
		"message": "Invalid path: text/this - 1:13"
	},
	{
		"description": "basic context",
		"it": "this keyword nested inside path",
		"template": "{{[this]}}",
		"data": {
			"this": "bar"
		},
		"expected": "bar",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "this keyword nested inside path",
		"template": "{{text/[this]}}",
		"data": {
			"text": {
				"this": "bar"
			}
		},
		"expected": "bar",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "this keyword in helpers",
		"template": "{{#goodbyes}}{{foo this}}{{/goodbyes}}",
		"data": {
			"goodbyes": [
				"goodbye",
				"Goodbye",
				"GOODBYE"
			]
		},
		"expected": "bar goodbyebar Goodbyebar GOODBYE",
		"helpers": {
			"foo": {
				"!code": true,
				"javascript": "function (value) {\n        return 'bar ' + value;\n    }",
				"phpstub": "function (value) {\n        return 'bar ' + value;\n    }"
			}
		},
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "this keyword in helpers",
		"template": "{{#hellos}}{{foo this/text}}{{/hellos}}",
		"data": {
			"hellos": [
				{
					"text": "hello"
				},
				{
					"text": "Hello"
				},
				{
					"text": "HELLO"
				}
			]
		},
		"expected": "bar hellobar Hellobar HELLO",
		"helpers": {
			"foo": {
				"!code": true,
				"javascript": "function (value) {\n        return 'bar ' + value;\n    }",
				"phpstub": "function (value) {\n        return 'bar ' + value;\n    }"
			}
		},
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "this keyword nested inside helpers param",
		"template": "{{#hellos}}{{foo text/this/foo}}{{/hellos}}",
		"exception": true,
		"message": "Invalid path: text/this - 1:17"
	},
	{
		"description": "basic context",
		"it": "this keyword nested inside helpers param",
		"template": "{{foo [this]}}",
		"data": {
			"foo": {
				"!code": true,
				"javascript": "function (value) { return value; }",
				"phpstub": "function (value) { return value; }"
			},
			"this": "bar"
		},
		"expected": "bar",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "this keyword nested inside helpers param",
		"template": "{{foo text/[this]}}",
		"data": {
			"foo": {
				"!code": true,
				"javascript": "function (value) { return value; }",
				"phpstub": "function (value) { return value; }"
			},
			"text": {
				"this": "bar"
			}
		},
		"expected": "bar",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "pass string literals",
		"template": "{{\"foo\"}}",
		"data": {},
		"expected": "",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "pass string literals",
		"template": "{{\"foo\"}}",
		"data": {
			"foo": "bar"
		},
		"expected": "bar",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "pass string literals",
		"template": "{{#\"foo\"}}{{.}}{{/\"foo\"}}",
		"data": {
			"foo": [
				"bar",
				"baz"
			]
		},
		"expected": "barbaz",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "pass number literals",
		"template": "{{12}}",
		"data": {},
		"expected": "",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "pass number literals",
		"template": "{{12}}",
		"data": {
			"12": "bar"
		},
		"expected": "bar",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "pass number literals",
		"template": "{{12.34}}",
		"data": {},
		"expected": "",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "pass number literals",
		"template": "{{12.34}}",
		"data": {
			"12.34": "bar"
		},
		"expected": "bar",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "pass number literals",
		"template": "{{12.34 1}}",
		"data": {
			"12": {
				"34": {}
			},
			"12.34": {
				"!code": true,
				"javascript": "function (arg) { return 'bar' + arg; }"
			}
		},
		"expected": "bar1",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "pass boolean literals",
		"template": "{{true}}",
		"data": {},
		"expected": "",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "pass boolean literals",
		"template": "{{true}}",
		"data": {
			"": "foo"
		},
		"expected": "",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "pass boolean literals",
		"template": "{{false}}",
		"data": {
			"false": "foo"
		},
		"expected": "foo",
		"compileOptions": {}
	},
	{
		"description": "basic context",
		"it": "should handle literals in subexpression",
		"template": "{{foo (false)}}",
		"data": {
			"false": {
				"!code": true,
				"javascript": "function () { return 'bar'; }",
				"phpstub": "function () { return 'bar'; }"
			}
		},
		"expected": "bar",
		"helpers": {
			"foo": {
				"!code": true,
				"javascript": "function (arg) {\n        return arg;\n      }",
				"phpstub": "function (arg) {\n        return arg;\n      }"
			}
		},
		"compileOptions": {}
	}
]