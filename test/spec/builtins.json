[
	{
		"description": "#if",
		"it": "if",
		"template": "{{#if goodbye}}GOODBYE {{/if}}cruel {{world}}!",
		"data": {
			"goodbye": true,
			"world": "world"
		},
		"expected": "GOODBYE cruel world!",
		"compileOptions": {}
	},
	{
		"description": "#if",
		"it": "if",
		"template": "{{#if goodbye}}GOODBYE {{/if}}cruel {{world}}!",
		"data": {
			"goodbye": "dummy",
			"world": "world"
		},
		"expected": "GOODBYE cruel world!",
		"compileOptions": {}
	},
	{
		"description": "#if",
		"it": "if",
		"template": "{{#if goodbye}}GOODBYE {{/if}}cruel {{world}}!",
		"data": {
			"goodbye": false,
			"world": "world"
		},
		"expected": "cruel world!",
		"compileOptions": {}
	},
	{
		"description": "#if",
		"it": "if",
		"template": "{{#if goodbye}}GOODBYE {{/if}}cruel {{world}}!",
		"data": {
			"world": "world"
		},
		"expected": "cruel world!",
		"compileOptions": {}
	},
	{
		"description": "#if",
		"it": "if",
		"template": "{{#if goodbye}}GOODBYE {{/if}}cruel {{world}}!",
		"data": {
			"goodbye": [
				"foo"
			],
			"world": "world"
		},
		"expected": "GOODBYE cruel world!",
		"compileOptions": {}
	},
	{
		"description": "#if",
		"it": "if",
		"template": "{{#if goodbye}}GOODBYE {{/if}}cruel {{world}}!",
		"data": {
			"goodbye": [],
			"world": "world"
		},
		"expected": "cruel world!",
		"compileOptions": {}
	},
	{
		"description": "#if",
		"it": "if",
		"template": "{{#if goodbye}}GOODBYE {{/if}}cruel {{world}}!",
		"data": {
			"goodbye": 0,
			"world": "world"
		},
		"expected": "cruel world!",
		"compileOptions": {}
	},
	{
		"description": "#if",
		"it": "if",
		"template": "{{#if goodbye includeZero=true}}GOODBYE {{/if}}cruel {{world}}!",
		"data": {
			"goodbye": 0,
			"world": "world"
		},
		"expected": "GOODBYE cruel world!",
		"compileOptions": {}
	},
	{
		"description": "#if",
		"it": "if with function argument",
		"template": "{{#if goodbye}}GOODBYE {{/if}}cruel {{world}}!",
		"data": {
			"goodbye": {
				"!code": true,
				"javascript": "function () {return true; }"
			},
			"world": "world"
		},
		"expected": "GOODBYE cruel world!",
		"compileOptions": {}
	},
	{
		"description": "#if",
		"it": "if with function argument",
		"template": "{{#if goodbye}}GOODBYE {{/if}}cruel {{world}}!",
		"data": {
			"goodbye": {
				"!code": true,
				"javascript": "function () {return this.world; }"
			},
			"world": "world"
		},
		"expected": "GOODBYE cruel world!",
		"compileOptions": {}
	},
	{
		"description": "#if",
		"it": "if with function argument",
		"template": "{{#if goodbye}}GOODBYE {{/if}}cruel {{world}}!",
		"data": {
			"goodbye": {
				"!code": true,
				"javascript": "function () {return false; }"
			},
			"world": "world"
		},
		"expected": "cruel world!",
		"compileOptions": {}
	},
	{
		"description": "#if",
		"it": "if with function argument",
		"template": "{{#if goodbye}}GOODBYE {{/if}}cruel {{world}}!",
		"data": {
			"goodbye": {
				"!code": true,
				"javascript": "function () {return this.foo; }"
			},
			"world": "world"
		},
		"expected": "cruel world!",
		"compileOptions": {}
	},
	{
		"description": "#if",
		"it": "should not change the depth list",
		"template": "{{#with foo}}{{#if goodbye}}GOODBYE cruel {{../world}}!{{/if}}{{/with}}",
		"data": {
			"foo": {
				"goodbye": true
			},
			"world": "world"
		},
		"expected": "GOODBYE cruel world!",
		"compileOptions": {}
	},
	{
		"description": "#with",
		"it": "with",
		"template": "{{#with person}}{{first}} {{last}}{{/with}}",
		"data": {
			"person": {
				"first": "Alan",
				"last": "Johnson"
			}
		},
		"expected": "Alan Johnson",
		"compileOptions": {}
	},
	{
		"description": "#with",
		"it": "with with function argument",
		"template": "{{#with person}}{{first}} {{last}}{{/with}}",
		"data": {
			"person": {
				"!code": true,
				"javascript": "function () { return {first: 'Alan', last: 'Johnson'}; }"
			}
		},
		"expected": "Alan Johnson",
		"compileOptions": {}
	},
	{
		"description": "#with",
		"it": "with with else",
		"template": "{{#with person}}Person is present{{else}}Person is not present{{/with}}",
		"data": {},
		"expected": "Person is not present",
		"compileOptions": {}
	},
	{
		"description": "#with",
		"it": "with provides block parameter",
		"template": "{{#with person as |foo|}}{{foo.first}} {{last}}{{/with}}",
		"data": {
			"person": {
				"first": "Alan",
				"last": "Johnson"
			}
		},
		"expected": "Alan Johnson",
		"compileOptions": {}
	},
	{
		"description": "#with",
		"it": "works when data is disabled",
		"template": "{{#with person as |foo|}}{{foo.first}} {{last}}{{/with}}",
		"data": {
			"person": {
				"first": "Alan",
				"last": "Johnson"
			}
		},
		"expected": "Alan Johnson",
		"compileOptions": {
			"data": false
		}
	},
	{
		"description": "#each",
		"it": "each",
		"template": "{{#each goodbyes}}{{text}}! {{/each}}cruel {{world}}!",
		"data": {
			"goodbyes": [
				{
					"text": "goodbye"
				},
				{
					"text": "Goodbye"
				},
				{
					"text": "GOODBYE"
				}
			],
			"world": "world"
		},
		"expected": "goodbye! Goodbye! GOODBYE! cruel world!",
		"compileOptions": {},
		"globalHelpers": {
			"detectDataInsideEach": {
				"!code": true,
				"javascript": "function (options) {\n        return options.data && options.data.exclaim;\n      }"
			}
		}
	},
	{
		"description": "#each",
		"it": "each",
		"template": "{{#each goodbyes}}{{text}}! {{/each}}cruel {{world}}!",
		"data": {
			"goodbyes": [],
			"world": "world"
		},
		"expected": "cruel world!",
		"compileOptions": {},
		"globalHelpers": {
			"detectDataInsideEach": {
				"!code": true,
				"javascript": "function (options) {\n        return options.data && options.data.exclaim;\n      }"
			}
		}
	},
	{
		"description": "#each",
		"it": "each without data",
		"template": "{{#each goodbyes}}{{text}}! {{/each}}cruel {{world}}!",
		"data": {
			"goodbyes": [
				{
					"text": "goodbye"
				},
				{
					"text": "Goodbye"
				},
				{
					"text": "GOODBYE"
				}
			],
			"world": "world"
		},
		"expected": "goodbye! Goodbye! GOODBYE! cruel world!",
		"compileOptions": {},
		"globalHelpers": {
			"detectDataInsideEach": {
				"!code": true,
				"javascript": "function (options) {\n        return options.data && options.data.exclaim;\n      }"
			}
		}
	},
	{
		"description": "#each",
		"it": "each without data",
		"template": "{{#each .}}{{.}}{{/each}}",
		"data": {
			"goodbyes": "cruel",
			"world": "world"
		},
		"expected": "cruelworld",
		"compileOptions": {},
		"globalHelpers": {
			"detectDataInsideEach": {
				"!code": true,
				"javascript": "function (options) {\n        return options.data && options.data.exclaim;\n      }"
			}
		}
	},
	{
		"description": "#each",
		"it": "each without context",
		"template": "{{#each goodbyes}}{{text}}! {{/each}}cruel {{world}}!",
		"expected": "cruel !",
		"compileOptions": {},
		"globalHelpers": {
			"detectDataInsideEach": {
				"!code": true,
				"javascript": "function (options) {\n        return options.data && options.data.exclaim;\n      }"
			}
		}
	},
	{
		"description": "#each",
		"it": "each with an object and @key",
		"template": "{{#each goodbyes}}{{@key}}. {{text}}! {{/each}}cruel {{world}}!",
		"data": {
			"goodbyes": {
				"2": {
					"text": "GOODBYE"
				},
				"<b>#1</b>": {
					"text": "goodbye"
				}
			},
			"world": "world"
		},
		"compileOptions": {}
	},
	{
		"description": "#each",
		"it": "each with an object and @key",
		"template": "{{#with person as |foo|}}{{foo.first}} {{last}}{{/with}}",
		"expected": true,
		"message": "each with object argument iterates over the contents when not empty"
	},
	{
		"description": "#each",
		"it": "each with an object and @key",
		"template": "{{#each goodbyes}}{{@key}}. {{text}}! {{/each}}cruel {{world}}!",
		"data": {
			"goodbyes": {},
			"world": "world"
		},
		"expected": "cruel world!",
		"compileOptions": {},
		"globalHelpers": {
			"detectDataInsideEach": {
				"!code": true,
				"javascript": "function (options) {\n        return options.data && options.data.exclaim;\n      }"
			}
		}
	},
	{
		"description": "#each",
		"it": "each with @index",
		"template": "{{#each goodbyes}}{{@index}}. {{text}}! {{/each}}cruel {{world}}!",
		"data": {
			"goodbyes": [
				{
					"text": "goodbye"
				},
				{
					"text": "Goodbye"
				},
				{
					"text": "GOODBYE"
				}
			],
			"world": "world"
		},
		"expected": "0. goodbye! 1. Goodbye! 2. GOODBYE! cruel world!",
		"message": "The @index variable is used"
	},
	{
		"description": "#each",
		"it": "each with nested @index",
		"template": "{{#each goodbyes}}{{@index}}. {{text}}! {{#each ../goodbyes}}{{@index}} {{/each}}After {{@index}} {{/each}}{{@index}}cruel {{world}}!",
		"data": {
			"goodbyes": [
				{
					"text": "goodbye"
				},
				{
					"text": "Goodbye"
				},
				{
					"text": "GOODBYE"
				}
			],
			"world": "world"
		},
		"expected": "0. goodbye! 0 1 2 After 0 1. Goodbye! 0 1 2 After 1 2. GOODBYE! 0 1 2 After 2 cruel world!",
		"message": "The @index variable is used"
	},
	{
		"description": "#each",
		"it": "each with block params",
		"template": "{{#each goodbyes as |value index|}}{{index}}. {{value.text}}! {{#each ../goodbyes as |childValue childIndex|}} {{index}} {{childIndex}}{{/each}} After {{index}} {{/each}}{{index}}cruel {{world}}!",
		"data": {
			"goodbyes": [
				{
					"text": "goodbye"
				},
				{
					"text": "Goodbye"
				}
			],
			"world": "world"
		},
		"expected": "0. goodbye!  0 0 0 1 After 0 1. Goodbye!  1 0 1 1 After 1 cruel world!"
	},
	{
		"description": "#each",
		"it": "each object with @index",
		"template": "{{#each goodbyes}}{{@index}}. {{text}}! {{/each}}cruel {{world}}!",
		"data": {
			"goodbyes": {
				"a": {
					"text": "goodbye"
				},
				"b": {
					"text": "Goodbye"
				},
				"c": {
					"text": "GOODBYE"
				}
			},
			"world": "world"
		},
		"expected": "0. goodbye! 1. Goodbye! 2. GOODBYE! cruel world!",
		"message": "The @index variable is used"
	},
	{
		"description": "#each",
		"it": "each with @first",
		"template": "{{#each goodbyes}}{{#if @first}}{{text}}! {{/if}}{{/each}}cruel {{world}}!",
		"data": {
			"goodbyes": [
				{
					"text": "goodbye"
				},
				{
					"text": "Goodbye"
				},
				{
					"text": "GOODBYE"
				}
			],
			"world": "world"
		},
		"expected": "goodbye! cruel world!",
		"message": "The @first variable is used"
	},
	{
		"description": "#each",
		"it": "each with nested @first",
		"template": "{{#each goodbyes}}({{#if @first}}{{text}}! {{/if}}{{#each ../goodbyes}}{{#if @first}}{{text}}!{{/if}}{{/each}}{{#if @first}} {{text}}!{{/if}}) {{/each}}cruel {{world}}!",
		"data": {
			"goodbyes": [
				{
					"text": "goodbye"
				},
				{
					"text": "Goodbye"
				},
				{
					"text": "GOODBYE"
				}
			],
			"world": "world"
		},
		"expected": "(goodbye! goodbye! goodbye!) (goodbye!) (goodbye!) cruel world!",
		"message": "The @first variable is used"
	},
	{
		"description": "#each",
		"it": "each object with @first",
		"template": "{{#each goodbyes}}{{#if @first}}{{text}}! {{/if}}{{/each}}cruel {{world}}!",
		"data": {
			"goodbyes": {
				"foo": {
					"text": "goodbye"
				},
				"bar": {
					"text": "Goodbye"
				}
			},
			"world": "world"
		},
		"expected": "goodbye! cruel world!",
		"message": "The @first variable is used"
	},
	{
		"description": "#each",
		"it": "each with @last",
		"template": "{{#each goodbyes}}{{#if @last}}{{text}}! {{/if}}{{/each}}cruel {{world}}!",
		"data": {
			"goodbyes": [
				{
					"text": "goodbye"
				},
				{
					"text": "Goodbye"
				},
				{
					"text": "GOODBYE"
				}
			],
			"world": "world"
		},
		"expected": "GOODBYE! cruel world!",
		"message": "The @last variable is used"
	},
	{
		"description": "#each",
		"it": "each object with @last",
		"template": "{{#each goodbyes}}{{#if @last}}{{text}}! {{/if}}{{/each}}cruel {{world}}!",
		"data": {
			"goodbyes": {
				"foo": {
					"text": "goodbye"
				},
				"bar": {
					"text": "Goodbye"
				}
			},
			"world": "world"
		},
		"expected": "Goodbye! cruel world!",
		"message": "The @last variable is used"
	},
	{
		"description": "#each",
		"it": "each with nested @last",
		"template": "{{#each goodbyes}}({{#if @last}}{{text}}! {{/if}}{{#each ../goodbyes}}{{#if @last}}{{text}}!{{/if}}{{/each}}{{#if @last}} {{text}}!{{/if}}) {{/each}}cruel {{world}}!",
		"data": {
			"goodbyes": [
				{
					"text": "goodbye"
				},
				{
					"text": "Goodbye"
				},
				{
					"text": "GOODBYE"
				}
			],
			"world": "world"
		},
		"expected": "(GOODBYE!) (GOODBYE!) (GOODBYE! GOODBYE! GOODBYE!) cruel world!",
		"message": "The @last variable is used"
	},
	{
		"description": "#each",
		"it": "each with function argument",
		"template": "{{#each goodbyes}}{{text}}! {{/each}}cruel {{world}}!",
		"data": {
			"goodbyes": {
				"!code": true,
				"javascript": "function () { return [{text: 'goodbye'}, {text: 'Goodbye'}, {text: 'GOODBYE'}]; }"
			},
			"world": "world"
		},
		"expected": "goodbye! Goodbye! GOODBYE! cruel world!",
		"compileOptions": {},
		"globalHelpers": {
			"detectDataInsideEach": {
				"!code": true,
				"javascript": "function (options) {\n        return options.data && options.data.exclaim;\n      }"
			}
		}
	},
	{
		"description": "#each",
		"it": "each with function argument",
		"template": "{{#each goodbyes}}{{text}}! {{/each}}cruel {{world}}!",
		"data": {
			"goodbyes": [],
			"world": "world"
		},
		"expected": "cruel world!",
		"compileOptions": {},
		"globalHelpers": {
			"detectDataInsideEach": {
				"!code": true,
				"javascript": "function (options) {\n        return options.data && options.data.exclaim;\n      }"
			}
		}
	},
	{
		"description": "#each",
		"it": "each object when last key is an empty string",
		"template": "{{#each goodbyes}}{{@index}}. {{text}}! {{/each}}cruel {{world}}!",
		"data": {
			"goodbyes": {
				"a": {
					"text": "goodbye"
				},
				"b": {
					"text": "Goodbye"
				},
				"": {
					"text": "GOODBYE"
				}
			},
			"world": "world"
		},
		"expected": "0. goodbye! 1. Goodbye! 2. GOODBYE! cruel world!",
		"message": "Empty string key is not skipped"
	},
	{
		"description": "#each",
		"it": "data passed to helpers",
		"template": "{{#each letters}}{{this}}{{detectDataInsideEach}}{{/each}}",
		"data": {
			"letters": [
				"a",
				"b",
				"c"
			]
		},
		"expected": "a!b!c!",
		"message": "should output data",
		"options": {
			"data": {
				"exclaim": "!"
			}
		}
	},
	{
		"description": "#each",
		"it": "each on implicit context",
		"template": "{{#each}}{{text}}! {{/each}}cruel world!",
		"exception": true,
		"message": "Must pass iterator to #each"
	},
	{
		"description": "#log",
		"it": "should call logger at default level",
		"template": "{{log blah}}",
		"data": {
			"blah": "whee"
		},
		"expected": "",
		"compileOptions": {},
		"globalHelpers": {
			"detectDataInsideEach": {
				"!code": true,
				"javascript": "function (options) {\n        return options.data && options.data.exclaim;\n      }"
			}
		}
	},
	{
		"description": "#log",
		"it": "should call logger at default level",
		"template": "{{#each}}{{text}}! {{/each}}cruel world!",
		"message": "should call log with 1"
	},
	{
		"description": "#log",
		"it": "should call logger at default level",
		"template": "{{#each}}{{text}}! {{/each}}cruel world!",
		"message": "should call log with 'whee'"
	},
	{
		"description": "#log",
		"it": "should call logger at data level",
		"template": "{{log blah}}",
		"data": {
			"blah": "whee"
		},
		"expected": "",
		"compileOptions": {},
		"globalHelpers": {
			"detectDataInsideEach": {
				"!code": true,
				"javascript": "function (options) {\n        return options.data && options.data.exclaim;\n      }"
			}
		}
	},
	{
		"description": "#log",
		"it": "should call logger at data level",
		"template": "{{#each}}{{text}}! {{/each}}cruel world!"
	},
	{
		"description": "#log",
		"it": "should call logger at data level",
		"template": "{{#each}}{{text}}! {{/each}}cruel world!"
	},
	{
		"description": "#log",
		"it": "should output to info",
		"template": "{{log blah}}",
		"data": {
			"blah": "whee"
		},
		"expected": "",
		"compileOptions": {},
		"globalHelpers": {
			"detectDataInsideEach": {
				"!code": true,
				"javascript": "function (options) {\n        return options.data && options.data.exclaim;\n      }"
			}
		}
	},
	{
		"description": "#log",
		"it": "should output to info",
		"template": "{{#each}}{{text}}! {{/each}}cruel world!"
	},
	{
		"description": "#log",
		"it": "should log at data level",
		"template": "{{log blah}}",
		"data": {
			"blah": "whee"
		},
		"expected": "",
		"compileOptions": {},
		"globalHelpers": {
			"detectDataInsideEach": {
				"!code": true,
				"javascript": "function (options) {\n        return options.data && options.data.exclaim;\n      }"
			}
		}
	},
	{
		"description": "#log",
		"it": "should log at data level",
		"template": "{{#each}}{{text}}! {{/each}}cruel world!"
	},
	{
		"description": "#log",
		"it": "should handle missing logger",
		"template": "{{log blah}}",
		"data": {
			"blah": "whee"
		},
		"expected": "",
		"compileOptions": {},
		"globalHelpers": {
			"detectDataInsideEach": {
				"!code": true,
				"javascript": "function (options) {\n        return options.data && options.data.exclaim;\n      }"
			}
		}
	},
	{
		"description": "#log",
		"it": "should handle missing logger",
		"template": "{{#each}}{{text}}! {{/each}}cruel world!",
		"expected": false
	},
	{
		"description": "#log",
		"it": "should handle string log levels",
		"template": "{{log blah}}",
		"data": {
			"blah": "whee"
		},
		"expected": "",
		"compileOptions": {},
		"globalHelpers": {
			"detectDataInsideEach": {
				"!code": true,
				"javascript": "function (options) {\n        return options.data && options.data.exclaim;\n      }"
			}
		}
	},
	{
		"description": "#log",
		"it": "should handle string log levels",
		"template": "{{#each}}{{text}}! {{/each}}cruel world!"
	},
	{
		"description": "#log",
		"it": "should handle string log levels",
		"template": "{{log blah}}",
		"data": {
			"blah": "whee"
		},
		"expected": "",
		"compileOptions": {},
		"globalHelpers": {
			"detectDataInsideEach": {
				"!code": true,
				"javascript": "function (options) {\n        return options.data && options.data.exclaim;\n      }"
			}
		}
	},
	{
		"description": "#log",
		"it": "should handle string log levels",
		"template": "{{#each}}{{text}}! {{/each}}cruel world!",
		"expected": false
	},
	{
		"description": "#log",
		"it": "should handle hash log levels",
		"template": "{{log blah level=\"error\"}}",
		"data": {
			"blah": "whee"
		},
		"expected": "",
		"compileOptions": {},
		"globalHelpers": {
			"detectDataInsideEach": {
				"!code": true,
				"javascript": "function (options) {\n        return options.data && options.data.exclaim;\n      }"
			}
		}
	},
	{
		"description": "#log",
		"it": "should handle hash log levels",
		"template": "{{#each}}{{text}}! {{/each}}cruel world!"
	},
	{
		"description": "#log",
		"it": "should handle hash log levels",
		"template": "{{log blah level=\"debug\"}}",
		"data": {
			"blah": "whee"
		},
		"expected": "",
		"compileOptions": {},
		"globalHelpers": {
			"detectDataInsideEach": {
				"!code": true,
				"javascript": "function (options) {\n        return options.data && options.data.exclaim;\n      }"
			}
		}
	},
	{
		"description": "#log",
		"it": "should handle hash log levels",
		"template": "{{#each}}{{text}}! {{/each}}cruel world!",
		"expected": false
	},
	{
		"description": "#log",
		"it": "should pass multiple log arguments",
		"template": "{{log blah \"foo\" 1}}",
		"data": {
			"blah": "whee"
		},
		"expected": "",
		"compileOptions": {},
		"globalHelpers": {
			"detectDataInsideEach": {
				"!code": true,
				"javascript": "function (options) {\n        return options.data && options.data.exclaim;\n      }"
			}
		}
	},
	{
		"description": "#log",
		"it": "should pass multiple log arguments",
		"template": "{{#each}}{{text}}! {{/each}}cruel world!"
	},
	{
		"description": "#lookup",
		"it": "should lookup arbitrary content",
		"template": "{{#each goodbyes}}{{lookup ../data .}}{{/each}}",
		"data": {
			"goodbyes": [
				0,
				1
			],
			"data": [
				"foo",
				"bar"
			]
		},
		"expected": "foobar"
	},
	{
		"description": "#lookup",
		"it": "should not fail on undefined value",
		"template": "{{#each goodbyes}}{{lookup ../bar .}}{{/each}}",
		"data": {
			"goodbyes": [
				0,
				1
			],
			"data": [
				"foo",
				"bar"
			]
		},
		"expected": ""
	}
]